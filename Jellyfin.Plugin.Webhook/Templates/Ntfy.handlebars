##REMOVE THESE LINES!!! ----->
##This JSON template uses markdown (e.g. "---", "**" & "## ") which is supported by ntfy.sh on browser. Don't forget to add following Request Header:
##Key: X-Markdown
##Value: true
##
##To publish as JSON, use the ntfy root URL, not the topic URL:
##Correct: https://ntfy.sh[:PORT]
##Incorrect: https://ntfy.sh[:PORT]/jellyfin
##
##For use with enabled Access Controll (Authentification)
##Add Request Header acording to https://docs.ntfy.sh/publish/#authentication
##
##The topic ("jellyfin"), priorities (1-5) and of course titles & messages are specified within this JSON template. Modify them as you wish.
##<----- REMOVE THESE LINES!!!
{
    "topic": "jellyfin",
    {{#if_equals NotificationType 'PlaybackStart'}}
        "priority": 2,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "attach": "{{{ServerUrl}}}/Items/{{{ItemId}}}/Images/Primary",
        "actions": [{ "action": "view", "label": "Visit Jellyfin", "url": "{{{ServerUrl}}}/web/#/details?id={{ItemId}}" }],
            {{#if_equals ItemType 'Audio'}}
                "title": "{{{NotificationUsername}}} Started Listening {{{Artist}}} - {{{Name}}} ({{Year}})",
                "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Action:** Playback started\n**- Play Method:** {{{PlayMethod}}}\n**- Playback Position:** {{{PlaybackPosition}}}\n\n**- Artist:** {{{Artist}}}\n**- Track:** {{{Name}}}\n**- Album:** {{{Album}}} ({{Year}})\n**- Runtime:** {{RunTime}}",
                "tags": ["musical_note", "arrow_forward"]
            {{else}}
            {{#if_equals ItemType 'Episode'}}
                "title": "{{{NotificationUsername}}} Started Watching {{{SeriesName}}} ({{Year}}) - S{{SeasonNumber00}}E{{EpisodeNumber00}}",
                "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Action:** Playback started\n**- Play Method:** {{{PlayMethod}}}\n**- Playback Position:** {{{PlaybackPosition}}}\n\n**- Series:** {{{SeriesName}}} ({{Year}})\n**- Episode:** S{{SeasonNumber00}}E{{EpisodeNumber00}} - {{{Name}}}\n**- Runtime:** {{RunTime}}\n\n**- Description:**\n{{{Overview}}}",
                "tags": ["tv", "arrow_forward"]
            {{else}}
                "title": "{{{NotificationUsername}}} Started Watching {{{Name}}} ({{Year}})",
                "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Action:** Playback started\n**- Play Method:** {{{PlayMethod}}}\n**- Playback Position:** {{{PlaybackPosition}}}\n\n**- Movie:** {{{Name}}} ({{Year}})\n**- Runtime:** {{RunTime}}\n\n**- Description:**\n{{{Overview}}}",
                "tags": ["film_projector", "arrow_forward"]
            {{/if_equals}}
            {{/if_equals}}
    {{/if_equals}}

    {{#if_equals NotificationType 'PlaybackStop'}}
        "priority": 2,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "attach": "{{{ServerUrl}}}/Items/{{{ItemId}}}/Images/Primary",
        "actions": [{ "action": "view", "label": "Visit Jellyfin", "url": "{{{ServerUrl}}}/web/#/details?id={{ItemId}}" }],
            {{#if_equals ItemType 'Audio'}}
                "title": "{{{NotificationUsername}}} Stopped Watching {{{Artist}}} - {{{Name}}} ({{Year}})",
                "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Action:** Playback stopped\n**- Played To Completion:** {{{PlayedToCompletion}}}\n**- Playback Position:** {{{PlaybackPosition}}}\n\n**- Artist:** {{{Artist}}}\n**- Track:** {{{Name}}}\n**- Album:** {{{Album}}} ({{Year}})\n**- Runtime:** {{RunTime}}",
                "tags": ["musical_note", "stop_button"]
            {{else}}
            {{#if_equals ItemType 'Episode'}}
                "title": "{{{NotificationUsername}}} Stopped Watching {{{SeriesName}}} ({{Year}}) - S{{SeasonNumber00}}E{{EpisodeNumber00}}",
                "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Action:** Playback stopped\n**- Played To Completion:** {{{PlayedToCompletion}}}\n**- Playback Position:** {{{PlaybackPosition}}}\n\n**- Series:** {{{SeriesName}}} ({{Year}})\n**- Episode:** S{{SeasonNumber00}}E{{EpisodeNumber00}} - {{{Name}}}\n**- Runtime:** {{RunTime}}\n\n**- Description:**\n{{{Overview}}}",
                "tags": ["tv", "stop_button"]
            {{else}}
                "title": "{{{NotificationUsername}}} Stopped Watching {{{Name}}} ({{Year}})",
                "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Action:** Playback stopped\n**- Played To Completion:** {{{PlayedToCompletion}}}\n**- Playback Position:** {{{PlaybackPosition}}}\n\n**- Movie:** {{{Name}}} ({{Year}})\n**- Runtime:** {{RunTime}}\n\n**- Description:**\n{{{Overview}}}",
                "tags": ["film_projector", "stop_button"]
            {{/if_equals}}
            {{/if_equals}}
    {{/if_equals}}


    {{#if_equals NotificationType 'ItemAdded'}}
    "priority": 3,
    "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
    "attach": "{{{ServerUrl}}}/Items/{{{ItemId}}}/Images/Primary",
    "actions": [{ "action": "view", "label": "Visit Jellyfin", "url": "{{{ServerUrl}}}/web/#/details?id={{ItemId}}" }],
        {{#if_equals ItemType 'Audio'}}
            "title": "New Song: {{{Artist}}} - {{{Name}}} | {{{Album}}} ({{Year}})",
            "message": "---\n**- Artist:** {{{Artist}}}\n**- Track:** {{{Name}}}\n**- Album:** {{{Album}}} ({{Year}})\n**- Runtime:** {{RunTime}}\n**- Status:** Available\n\n**- Description:**\n{{{Overview}}}",
            "tags": ["musical_note", "heavy_plus_sign"]
        {{else}}
        {{#if_equals ItemType 'MusicAlbum'}}
            "title": "New Album: {{{Artist}}} - {{{Name}}} ({{Year}})",
            "message": "---\n**- Artist:** {{{Artist}}}\n**- Album:** {{{Name}}} ({{Year}})\n**- Runtime:** {{RunTime}}\n**- Status:** Available\n\n**- Description:**\n{{{Overview}}}",
            "tags": ["musical_note", "heavy_plus_sign"]
        {{else}}
        {{#if_equals ItemType 'Movie'}}
            "title": "New Movie: {{{Name}}} ({{Year}})",
            "message": "---\n**- Movie:** {{{Name}}} ({{Year}})\n**- Runtime:** {{RunTime}}\n**- Status:** Available\n\n**- Description:**\n{{{Overview}}}",
            "tags": ["film_projector", "heavy_plus_sign"]
        {{else}}
        {{#if_equals ItemType 'Season'}}
            "title": "New Season: {{{SeriesName}}} ({{Year}}) - S{{SeasonNumber00}}",
            "message": "---\n**- Series:** {{{SeriesName}}} ({{Year}})\n**- Season:** {{{Name}}}\n**- Status:** Available\n\n**- Description:**\n{{{Overview}}}",
            "tags": ["tv", "heavy_plus_sign"]
        {{else}}
        {{#if_equals ItemType 'Series'}}
            "title": "New Show: {{Name}} ({{Year}})",
            "message": "---\n**- Series:** {{Name}} ({{Year}})\n**- Status:** Available\n\n**- Description:**\n{{{Overview}}}",
            "tags": ["tv", "heavy_plus_sign"]
        {{else}}
            "title": "New Episode: {{{SeriesName}}} ({{Year}}) - S{{SeasonNumber00}}E{{EpisodeNumber00}}",
            "message": "---\n**- Series:** {{{SeriesName}}} ({{Year}})\n**- Episode:** S{{SeasonNumber00}}E{{EpisodeNumber00}} - {{{Name}}}\n**- Runtime:** {{RunTime}}\n**- Status:** Available\n\n**- Description:**\n{{{Overview}}}",
            "tags": ["tv", "heavy_plus_sign"]
        {{/if_equals}}
        {{/if_equals}}
        {{/if_equals}}
        {{/if_equals}}
        {{/if_equals}}
    {{/if_equals}}


    {{#if_equals NotificationType 'PendingRestart'}}
        "title": "Jellyfin Restart Required",
        "priority": 4,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "tags": ["gear", "arrows_counterclockwise"],
        "message": "---\n**- Message:** Jellyfin needs to be restarted, please restart jellyfin as soon as possible!"
    {{/if_equals}}


    {{#if_equals NotificationType 'AuthenticationFailure'}}
        "title": "{{{NotificationUsername}}} Failed to Authenticate",
        "priority": 5,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "tags": ["bust_in_silhouette", "x"],
        "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Issue:** Login request was denied: Wrong password!"
    {{/if_equals}}

    {{#if_equals NotificationType 'AuthenticationSuccess'}}
        "title": "{{{NotificationUsername}}} Authenticated Successfully",
        "priority": 3,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "tags": ["bust_in_silhouette", "white_check_mark"],
        "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Message:** Successfully logged in!"
    {{/if_equals}}

    {{#if_equals NotificationType 'UserLockedOut'}}
        "title": "{{{NotificationUsername}}} Locked Out",
        "priority": 5,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "tags": ["bust_in_silhouette", "no_entry_sign"],
        "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Issue:** User has been locked out!"
    {{/if_equals}}

    {{#if_equals NotificationType 'SessionStart'}}
        "title": "{{{NotificationUsername}}} Logged In",
        "priority": 3,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "tags": ["bust_in_silhouette", "key"],
        "message": "---\n**- User:** {{{NotificationUsername}}}\n**- Device/Client:** {{{DeviceName}}} - {{{ClientName}}}\n**- IP Address:** {{{RemoteEndPoint}}}\n**- Message:** User session has started!"
    {{/if_equals}}


    {{#if_equals NotificationType 'PluginInstallationFailed'}}
        "title": "Plugin {{{PluginName}}} Installation Failed",
        "priority": 5,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "tags": ["jigsaw", "x"],
        "actions": [{ "action": "view", "label": "Visit Plugin", "url": "{{{PluginSourceUrl}}}" }]
    {{/if_equals}}

    {{#if_equals NotificationType 'PluginUpdated'}}
        "title": "Plugin {{{PluginName}}} Updated",
        "priority": 3,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "tags": ["jigsaw", "rocket"],
        "actions": [{ "action": "view", "label": "Visit Plugin", "url": "{{{PluginSourceUrl}}}" }]
    {{/if_equals}}

    {{#if_equals NotificationType 'SubtitleDownloadFailure'}}
        "title": "Subtitle Download for {{{Name}}} Failed",
        "priority": 5,
        "icon": "{{{ServerUrl}}}/web/touchicon.f5bbb798cb2c65908633.png",
        "tags": ["speech_balloon", "x"],
        "actions": [{ "action": "view", "label": "Visit Jellyfin", "url": "{{{ServerUrl}}}/web/#/details?id={{ItemId}}" }]
    {{/if_equals}}
}
